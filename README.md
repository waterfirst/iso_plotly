# 🔊 ISO Polar Plot Visualization

ISO 광학 강도 분포(Luminance Distribution)를 극좌표 및 직교좌표계로 시각화하는 Streamlit 애플리케이션입니다.

## ✨ 주요 기능

### 📊 다양한 시각화 옵션
- **Polar Plot**: 극좌표계 기반 원형 시각화
- **Cartesian Plot**: 직교좌표계 기반 히트맵 시각화
- **Cross-section Analysis**: 특정 방향의 휘도 프로파일 분석

### 🎨 고급 시각화 기능
- **8가지 컬러맵**: Jet, Viridis, Plasma, Inferno, Hot, Cool, Rainbow, Turbo
- **해상도 조절**: 100~500 범위에서 렌더링 품질 조정
- **자동/수동 컬러바 범위 설정**
- **부드러운 보간법**: Gaussian filtering과 RBF 보간 적용

### ✂️ Cross-section 분석
- **가로 방향 (0°-180°)**: 우측(0°)과 좌측(180°) 휘도 프로파일 동시 비교
- **세로 방향 (90°-270°)**: 상단(90°)과 하단(270°) 휘도 프로파일 동시 비교
- **대칭성 분석**: 양방향 데이터를 하나의 그래프에서 비교

### 💾 다양한 내보내기 형식
- **HTML**: 인터랙티브 Plotly 차트 (확대/축소 가능)
- **PNG**: 고품질 정적 이미지
- **CSV**: 처리된 데이터 및 Cross-section 분석 결과

## 🚀 설치 및 실행

### 1. 환경 설정
```bash
# Python 3.7+ 필요
pip install -r requirements.txt
```

### 2. 애플리케이션 실행
```bash
streamlit run iso_plot.py
```

### 3. 웹 브라우저에서 접속
기본적으로 `http://localhost:8501`에서 실행됩니다.

## 📋 CSV 파일 형식

입력 CSV 파일은 다음 형식이어야 합니다:

```csv
Theta,0,10,20,30,...,350
0,100.5,95.2,89.1,...,98.7
5,98.3,92.1,87.5,...,96.2
10,95.8,89.7,84.9,...,93.8
...
```

- **첫 번째 컬럼**: `Theta` (각도 값)
- **나머지 컬럼**: 각 Phi 각도별 Luminance 값 (0, 10, 20, ..., 350)

## 🎯 사용법

### 1. 데이터 업로드
- 사이드바에서 CSV 파일 선택
- 자동으로 데이터 구조 분석 및 검증

### 2. 시각화 설정
- **컬러바 범위**: 자동(데이터 범위) 또는 수동 설정
- **컬러맵**: 8가지 옵션 중 선택
- **해상도**: 렌더링 품질 조정 (100-500)

### 3. Cross-section 분석
- **방향 선택**: 가로(0°-180°) 또는 세로(90°-270°)
- **양방향 비교**: 대칭성 분석을 위한 동시 표시

### 4. 결과 내보내기
- **메인 플롯**: HTML 형태로 인터랙티브 차트 저장
- **Cross-section**: HTML, PNG, CSV 형식으로 다중 내보내기

## 📊 출력 파일 형식

### Cross-section CSV 출력
- **가로 방향**: `Theta`, `Luminance_0deg`, `Luminance_180deg`
- **세로 방향**: `Theta`, `Luminance_90deg`, `Luminance_270deg`

## 🔧 기술적 특징

### 고급 보간 알고리즘
- **RBF 보간**: Radial Basis Function으로 부드러운 표면 생성
- **Gaussian 필터링**: 노이즈 제거 및 부드러운 렌더링
- **자동 NaN 처리**: 결측값 자동 보완

### 성능 최적화
- **@st.cache_data**: 데이터 로딩 캐싱으로 반복 처리 성능 향상
- **효율적인 메모리 관리**: 대용량 데이터 처리 최적화

### 오류 처리
- **강건한 에러 핸들링**: 다양한 예외 상황 자동 복구
- **사용자 친화적 에러 메시지**: 문제 발생 시 명확한 안내

## 🎨 시각화 예제

### Polar Plot (극좌표)
- 원형 형태로 전체 360° 휘도 분포 표시
- 각도별 패턴 및 대칭성 시각적 분석

### Cartesian Plot (직교좌표)
- 히트맵 형태로 공간적 분포 표시
- 색상 그라데이션으로 강도 변화 표현

### Cross-section Analysis
- 특정 축을 따른 1D 프로파일 추출
- 양방향 데이터 동시 비교로 대칭성 검증

## 📈 활용 분야

- **조명 설계**: LED, 할로겐 등 광원의 배광 특성 분석
- **자동차 헤드라이트**: 도로 조명 패턴 최적화
- **건축 조명**: 실내외 조명 효과 시뮬레이션
- **광학 연구**: 광원의 공간적 강도 분포 연구

## ⚡ 성능 팁

1. **해상도 조절**: 대용량 데이터는 낮은 해상도로 미리보기 후 최종 렌더링 시 고해상도 사용
2. **컬러바 범위**: 데이터 특성에 맞는 적절한 범위 설정으로 세부 패턴 강조
3. **브라우저 성능**: Chrome 또는 Firefox 최신 버전 사용 권장

## 🐛 문제 해결

### 일반적인 문제
1. **CSV 형식 오류**: Theta 컬럼 존재 여부 확인
2. **메모리 부족**: 해상도를 낮춰서 테스트
3. **느린 렌더링**: 데이터 크기 확인 및 브라우저 재시작

### 지원 데이터 형식
- CSV 파일 (UTF-8 인코딩)
- 숫자형 데이터 (정수, 실수)
- Theta: 0-90° 범위
- Phi: 0-360° 범위

## 📞 문의 및 지원

기술적 문제나 기능 요청이 있으시면 이슈를 등록해 주세요.

---

**개발 환경**: Python 3.7+, Streamlit, Plotly, Matplotlib
**라이선스**: MIT License
